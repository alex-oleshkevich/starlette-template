{% extends 'layouts/base.html' %}
{% import 'web/teams/lib.macro.html' as teams %}
{% import 'web/users/lib.macro.html' as users %}

{% block body %}
    <article class="flex h-full">
        <aside class="sidebar">
            <!-- team menu -->
            <section class="mb-6">
                <a href="{{ url('home') }}"
                   class="flex items-center justify-start mr-4 p-2 gap-3 mt-auto hover:bg-gray-200 w-full rounded-md">
                    <div>{{ teams.team_avatar(team) }}</div>
                    <div>
                        <div class="font-semibold text-lg">{{ team }}</div>
                    </div>
                </a>
            </section>
            <!-- end team menu -->

            <!-- sidebar menu -->
            <nav class="sidebar-menu">
                <a href="{{ url('dashboard') }}" class="sidebar-menu-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                        <path d="M12 13m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/>
                        <path d="M13.45 11.55l2.05 -2.05"/>
                        <path d="M6.4 20a9 9 0 1 1 11.2 0z"/>
                    </svg>
                    {{ _('Dashboard') }}
                </a>
            </nav>
            <!-- end sidebar menu -->

            <!-- user menu -->
            <section class="mt-auto">
                <button type="button" id="user-menu" data-dropdown-toggle="user-menu-dropdown"
                        class="flex items-center justify-start mr-4 p-2 gap-3 mt-auto hover:bg-gray-200 w-full rounded-md text-center">
                    <div>{{ users.user_avatar(user) }}</div>
                    <div class="w-full text-left">
                        <div class="font-semibold">{{ user }}</div>
                        <div class="text-sm text-gray-600">{{ team_member.role }}</div>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="ml-auto text-gray-500">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                        <path d="M6 9l6 6l6 -6"/>
                    </svg>
                </button>
                <form class="dropdown hidden" id="user-menu-dropdown">
                    <nav class="list-menu">
                        <a href="{{ url('profile') }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                 stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"/>
                                <path d="M12 10m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/>
                                <path d="M6.168 18.849a4 4 0 0 1 3.832 -2.849h4a4 4 0 0 1 3.834 2.855"/>
                            </svg>
                            {{ _('My Profile') }}
                        </a>
                        {% if team_memberships|length > 1 %}
                            <a href="{{ url('team.select') }}">{{ _('Change team') }}</a>
                        {% endif %}
                        <button formmethod="post" formaction="{{ url('logout') }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                 stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                <path
                                    d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"/>
                                <path d="M9 12h12l-3 -3"/>
                                <path d="M18 15l3 -3"/>
                            </svg>
                            {{ _('Log out') }}
                        </button>
                    </nav>
                </form>
            </section>
            <!-- end user menu -->
        </aside>

        <main class="ml-[var(--sidebar-width)] w-full h-auto p-10">
            <header class="flex items-center justify-between mb-6">
                <div>
                    {% block page_title %}
                        <div class="text-3xl font-semibold mb-2 leading-6">{{ page_title }}</div>
                        {% if page_description is defined %}
                            <div class="text-gray-600 text-sm">{{ page_description }}</div>
                        {% endif %}
                    {% endblock %}
                </div>
                <div class="flex items-center gap-2">
                    {% block page_actions %}
                        <button class="btn">Show</button>
                        <button class="btn btn-accent">Add</button>
                    {% endblock %}
                </div>
            </header>
            <section class="pb-10">
                {% include 'web/partial/flash_messages.html' %}
                {% block content %}
                    <div class="rounded-md border-2 border-dashed border-gray-300 w-full h-full p-5">
                        Page content goes here...
                    </div>
                {% endblock %}
            </section>
        </main>
    </article>

{% endblock %}
